function MyVanillaQR(e){for(var t={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},r=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i=new Array(256),o=0;8>o;o++)i[o]=1<<o;for(o=8;256>o;o++)i[o]=i[o-4]^i[o-5]^i[o-6]^i[o-8];var h=new Array(256);for(o=0;256>o;o++)h[i[o]]=o;h[1]=0;var n=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];this.imageTypes={bmp:"image/bmp",gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpg",png:"image/png","svg+xml":"image/svg+xml",tiff:"image/tiff",webp:"image/webp","x-icon":"image/x-icon"},this.QRframe=[],this.colors=["white","black"],this.str="",this.mode=-1,this.mask=-1,this.version=-1,this.width=300,this.format="",this.errorCorrect=errorCorrectLevel.H,this.ECICode="","undefined"!=typeof e&&(this.str=e.str||"",this.width=e.width||300,this.mask=e.mask||-1,this.mode=e.mode||-1,this.colors=e.colors||["white","black"],this.version=e.version||-1,this.format=e.format||-1,this.errorCorrect=e.errorCorrect||errorCorrectLevel.H,this.ECICode=e.ECICode||""),this.encodeDataQR=function(e){if(-1==this.mode&&(this.mode=this.selectMode(e)),-1==this.version)this.version=this.selectVersion(e);else if(this.getDataStreamLength(e,this.mode,this.version)>a(this.errorCorrect,this.version))throw new Error("the specified version can not support this data!");var r="",i=0,o="",h=0,n=0;switch(this.mode){case modeCode.Numeric:for(r=c(this.mode.toString(2),4)+c(e.length.toString(2),s(this.mode,this.version)),i=0;i<e.length;i++){if(o=e[i],h=4,e[i+1]&&(o+=e[++i],h=7),e[i+1]&&(o+=e[++i],h=10),n=parseInt(o,10),isNaN(n))throw new Error("Invalid character: `"+o+"`");r+=c(n.toString(2),h)}break;case modeCode.Alpha:for(r=c(this.mode.toString(2),4)+c(e.length.toString(2),s(this.mode,this.version)),i=0;i<e.length;i++)r+=e[i+1]?c((45*t[e[i].toUpperCase()]+t[e[++i].toUpperCase()]).toString(2),11):c(t[e[i].toUpperCase()].toString(2),6);break;case modeCode.ECI:var l=parseInt(this.ECICode,10),f="";if(128>l)f="0"+c(l.toString(2),7);else if(16384>l)f="10"+c(l.toString(2),14);else{if(!(1e6>l))throw new Error("ECI Assignment number is bigger than 999 999");f="110"+c(l.toString(2),21)}for(r=c(this.mode.toString(2),4)+f+c(modeCode.Byte.toString(2),4)+c(e.length.toString(2),s(modeCode.Byte,this.version)),l=0;l<e.length;l++)r+=c(e.charCodeAt(l).toString(2),8);break;case modeCode.Byte:for(r=c(this.mode.toString(2),4)+c(e.length.toString(2),s(this.mode,this.version)),l=0;l<e.length;l++)r+=c(e.charCodeAt(l).toString(2),8)}for(i=0;4>i&&r.length<=a(this.errorCorrect,this.version);)r+="0",i++;for(;r.length%8!=0;)r+="0";for(i=0;r.length<a(this.errorCorrect,this.version);)r+=i++%2==0?"11101100":"00010001";return r},this.generatePoly=function(e){for(var t=[0,0],r=1;t.length<=e;){for(var o=new Array(t.length+1),n=0;n<o.length;n++)0==n?o[n]=0:n==o.length-1?o[n]=(t[t.length-1]+r)%255:o[n]=h[parseInt((i[(t[n-1]+r)%255]^i[t[n]%255])%256+Math.floor((i[(t[n-1]+r)%255]^i[t[n]%255])/256))];t=o,r++}for(n=0;n<t.length;n++)t[n]=i[t[n]];return t},this.divisionPoly=function(e,t){var r=e.slice(),o=t.slice();if(t.length>e.length)return e;for(var n=h[e[0]],s=h[t[0]],a=0;a<o.length;a++)o[a]=i[(h[o[a]]+n)%255];for(a=0;a<r.length;a++)0!=r[a]&&(r[a]=i[(h[r[a]]+s)%255]);for(a=0;a<o.length;a++)r[a]=r[a]^o[a];return r.shift(),this.divisionPoly(r,t)},this.generateErrorCorrection=function(e){var t="",i=this.encodeDataQR(e),o=0,h=0,n=[],s=[],a=new Array(i.length/8);for(f=0;f<a.length;f++)a[f]=parseInt(i.substr(8*f,8),2);for(var l=r[4*(this.version-1)+this.errorCorrect],f=0;f<l.length/3;f++)for(var g=0;g<l[3*f];g++){var m=l[3*f+1]-l[3*f+2],d=[];d=f>0?a.slice(g*l[3*f+2]+f*l[3*(f-1)]*l[3*(f-1)+2],g*l[3*f+2]+f*l[3*(f-1)]*l[3*(f-1)+2]+l[3*f+2]):a.slice(g*l[3*f+2],g*l[3*f+2]+l[3*f+2]),o<d.length&&(o=d.length),m>h&&(h=m),n.push(d.slice());for(var v=d.length+m;d.length<v;)d.push(0);s.push(this.divisionPoly(d,this.generatePoly(m)))}for(f=0;o>f;f++)for(g=0;g<n.length;g++)f<n[g].length&&(t+=c(n[g][f].toString(2),8));for(f=0;h>f;f++)for(g=0;g<s.length;g++)f<s[g].length&&(t+=c(s[g][f].toString(2),8));return this.version>1&&this.version<7?t+="0000000":this.version>13&&this.version<21||this.version>27&&this.version<35?t+="000":this.version>20&&this.version<28&&(t+="0000"),t},this.putForVerInfo=function(e,t,r){var i="";switch(t){case errorCorrectLevel.L:i+="01";break;case errorCorrectLevel.M:i+="00";break;case errorCorrectLevel.Q:i+="11";break;case errorCorrectLevel.H:i+="10"}i+=c(r.toString(2),3);for(var o=i;o.length<15;)o+="0";for("0"==o[0]&&(o=o.slice(1));o.length>10;){for(var h="10100110111";h.length!=o.length;)h+="0";o=(parseInt(o,2)^parseInt(h,2)).toString(2)}i+=c(o,10),i=c((parseInt(i,2)^parseInt("101010000010010",2)).toString(2),15),i=i.split("").reverse().join("");for(var n=0;8>n;n++)e[8][e.length-1-n]=parseInt(i[n]),6>n?e[n][8]=i[n]:e[n+1][8]=i[n];for(n=0;7>n;n++)e[e.length-7+n][8]=parseInt(i[n+8]),0==n?e[8][7]=i[n+8]:e[8][6-n]=i[n+8];if(this.version>6){for(i=c(this.version.toString(2),6),o=i;o.length<18;)o+="0";for(;"0"==o[0];)o=o.slice(1);for(;o.length>12;){for(h="1111100100101";h.length!=o.length;)h+="0";o=(parseInt(o,2)^parseInt(h,2)).toString(2)}for(i+=c(o,12),i=i.split("").reverse().join(""),n=0;n<i.length;n++)e[e.length-11+n%3][Math.floor(n/3)]=parseInt(i[n]),e[Math.floor(n/3)][e.length-11+n%3]=parseInt(i[n])}return e},this.generateQR=function(){-1==this.version&&(this.version=this.selectVersion(this.str));var e=4*(this.version-1)+21;this.QRframe=new Array(e);for(var t=0;e>t;t++)this.QRframe[t]=new Array(e);this.putFinderPattern(),this.putAlignPattern(),this.putTimingPattern(),this.putQRInformation(),this.putData();var r=0;if(-1==this.mask){var i=[];for(t=0;t<this.QRframe.length;t++)i[t]=this.QRframe[t].slice();r=g(i)}else r=this.mask;l(this.QRframe,r),this.putForVerInfo(this.QRframe,this.errorCorrect,r)};var s=function(e,t){if(t>=1&&10>t)switch(e){case modeCode.Numeric:return 10;case modeCode.Alpha:return 9;case modeCode.Byte:case modeCode.ECI:return 8;case modeCode.Kanji:return 8;default:throw new Error("mode:"+e)}else if(27>t)switch(e){case modeCode.Numeric:return 12;case modeCode.Alpha:return 11;case modeCode.Byte:case modeCode.ECI:return 16;case modeCode.Kanji:return 10;default:throw new Error("mode:"+e)}else{if(!(41>t))throw new Error("type:"+t);switch(e){case modeCode.Numeric:return 14;case modeCode.Alpha:return 13;case modeCode.Byte:case modeCode.ECI:return 16;case modeCode.Kanji:return 12;default:throw new Error("mode:"+e)}}},a=function(e,t){for(var i=0,o=r[4*(t-1)+e],h=o.length/3,n=0;h>n;n++)i+=o[3*n]*o[3*n+2];return 8*i};this.getDataStreamLength=function(e,t,r){var i=s(t,r);switch(t){case modeCode.Numeric:var o=0;return e.length%3==1?o=4:e.length%3==2&&(o=7),4+i+10*Math.floor(e.length/3)+o;case modeCode.Alpha:return 4+i+11*Math.floor(e.length/2)+6*(e.length%2);case modeCode.Byte:return 4+i+8*e.length;case modeCode.ECI:var h=parseInt(this.ECICode,10),n="";if(128>h)n="0"+c(h.toString(2),7);else if(16384>h)n="10"+c(h.toString(2),14);else{if(!(1e6>h))throw new Error("ECI Assignment number is bigger than 999 999");n="110"+c(h.toString(2),21)}return 4+n.length+(4+i+8*e.length);case modeCode.Kanji:return 4+i+13*e.length}},this.selectMode=function(e){return d(e)?modeCode.Numeric:v(e)?modeCode.Alpha:this.ECICode?modeCode.ECI:modeCode.Byte},this.selectVersion=function(e){-1==this.mode&&(this.mode=this.selectMode(e));for(var t=1;41>t;){if(this.getDataStreamLength(e,this.mode,t)<a(this.errorCorrect,t))return t;t++}throw new Error("No version can support this data!")};var l=function(e,t){for(var r=(e.length-21)/4,i=n[r],o=[],h=0;h<i.length;h++)for(var s=0;s<i.length;s++){var a=i[h],l=i[s];8>a&&8>l||a>e.length-9&&8>l||l>e.length-9&&8>a||o.push([a+3,l+3,a-3,l-3])}for(h=0;h<e.length;h++)for(s=0;s<e.length;s++){var f=!1;if(!(9>h&&9>s||9>h&&s>e.length-9||h>e.length-9&&9>s||-1==e[h][s]||6==s||6==h)){for(var g=0;g<o.length&&!f;g++)h<o[g][0]&&h>o[g][2]&&s<o[g][1]&&s>o[g][3]&&(f=!0);if(!f)switch(t){case 0:(h+s)%2==0&&(e[h][s]=+!e[h][s]);break;case 1:h%2==0&&(e[h][s]=+!e[h][s]);break;case 2:s%3==0&&(e[h][s]=+!e[h][s]);break;case 3:(h+s)%3==0&&(e[h][s]=+!e[h][s]);break;case 4:(Math.floor(h/2)+Math.floor(s/3))%2==0&&(e[h][s]=+!e[h][s]);break;case 5:h*s%2+h*s%3==0&&(e[h][s]=+!e[h][s]);break;case 6:(h*s%2+h*s%3)%2==0&&(e[h][s]=+!e[h][s]);break;case 7:((h+s)%2+h*s%3)%2==0&&(e[h][s]=+!e[h][s])}}}return e},f=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e.length;i++){for(var o=0;e[r][i]==e[r][i+o]&&(o++,!(i+o>=e.length)););t+=+(o>=5)*(o-5+3),i=i+o-1}for(r=0;r<e.length;r++)for(i=0;i<e.length;i++){for(o=0;e[i][r]==e[i+o][r]&&(o++,!(i+o>=e.length)););t+=+(o>=5)*(o-5+3),i=i+o-1}for(o=0,r=0;r<e.length-1;r++)for(i=0;i<e.length-1;i++)e[r][i]==e[r+1][i]&&e[r][i]==e[r][i+1]&&e[r][i]==e[r+1][i+1]&&o++;t+=3*o;var h=[1,0,1,1,1,0,1,0,0,0,0],n=[0,0,0,0,1,0,1,1,1,0,1];for(o=0,r=0;r<e.length;r++)for(i=0;i<e.length-10;i++){var s=e[r].slice(i,i+11);(m(s,h)||m(s,n))&&o++}for(r=0;r<e.length;r++)for(i=0;i<e.length-10;i++){s=[];for(var a=0;11>a;a++)s.push(e[i+a][r]);(m(s,h)||m(s,n))&&o++}for(t+=40*o,o=0,r=0;r<e.length;r++)for(i=0;i<e.length;i++)1==e[r][i]&&o++;return r=5*Math.floor(o/(e.length*e.length)*100/5)-50,i=r+5,t+=Math.abs(r)/5>Math.abs(i)/5?Math.abs(i)/5*10:Math.abs(r)/5*10},g=function(e){for(var t=new Array(8),r=0;8>r;r++)t[r]=f(l(e,r));return t.indexOf(Math.min.apply(Math,t))};this.putFinderPattern=function(){for(var e=[[3,3],[this.QRframe.length-4,3],[3,this.QRframe.length-4]],t=0;t<e.length;t++)for(var r=e[t][0],i=e[t][1],o=0;5>o;o++)for(var h=0;2*o+1>h;h++)r-o>=0&&r-o<this.QRframe.length&&i-o+h>=0&&i-o+h<this.QRframe.length&&(this.QRframe[r-o][i-o+h]=+(o%2==1||0==o)),r+o>=0&&r+o<this.QRframe.length&&i-o+h>=0&&i-o+h<this.QRframe.length&&(this.QRframe[r+o][i-o+h]=+(o%2==1||0==o)),r-o+h>=0&&r-o+h<this.QRframe.length&&i-o>=0&&i-o<this.QRframe.length&&(this.QRframe[r-o+h][i-o]=+(o%2==1||0==o)),r-o+h>=0&&r-o+h<this.QRframe.length&&i+o>=0&&i+o<this.QRframe.length&&(this.QRframe[r-o+h][i+o]=+(o%2==1||0==o))},this.putAlignPattern=function(){for(var e=n[this.version-1],t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var i=e[t],o=e[r];if(!(8>i&&8>o||i>this.QRframe.length-9&&8>o||o>this.QRframe.length-9&&8>i))for(var h=0;3>h;h++)for(var s=0;2*h+1>s;s++)this.QRframe[i-h][o-h+s]=+(h%2==0),this.QRframe[i+h][o-h+s]=+(h%2==0),this.QRframe[i-h+s][o-h]=+(h%2==0),this.QRframe[i-h+s][o+h]=+(h%2==0)}},this.putTimingPattern=function(){for(var e=7;e<this.QRframe.length-8;e++)this.QRframe[6][e]=+(e%2==0),this.QRframe[e][6]=+(e%2==0)},this.putQRInformation=function(){for(var e=0;9>e;e++)6!=e&&(this.QRframe[e][8]=-1,this.QRframe[8][e]=-1);for(e=0;8>e;e++)this.QRframe[8][this.QRframe.length-1-e]=-1,this.QRframe[this.QRframe.length-1-e][8]=-1;if(this.QRframe[this.QRframe.length-8][8]=1,this.version>6)for(e=0;3>e;e++)for(var t=0;6>t;t++)this.QRframe[t][this.QRframe.length-9-e]=-1,this.QRframe[this.QRframe.length-9-e][t]=-1},this.putData=function(){for(var e=!1,t=0,r=this.QRframe.length-1,i=this.QRframe.length-1,o=[-1,1],h=this.generateErrorCorrection(this.str),n=0;n<Math.ceil(h.length/8);n++){for(var s=h.substr(8*n,8),a=0,l=0,f=0;a<s.length;)(r+o[t%2]*(!e*Math.floor(l/2)+e*Math.ceil(l/2))<0||r+o[t%2]*(!e*Math.floor(l/2)+e*Math.ceil(l/2))>this.QRframe.length-1)&&(i=!e*(i-2)+e*(i-1),r+=o[t%2]*Math.floor((l-1)/2),l=0,t++,e=!1),i+o[+e]*l%2==6&&(i-=1),r+o[t%2]*(!e*Math.floor(l/2)+e*Math.ceil(l/2))==6||-1==this.QRframe[r+o[t%2]*(!e*Math.floor(l/2)+e*Math.ceil(l/2))][i+o[+e]*l%2]||1==this.QRframe[r+o[t%2]*(!e*Math.floor(l/2)+e*Math.ceil(l/2))][i+o[+e]*l%2]||0==this.QRframe[r+o[t%2]*(!e*Math.floor(l/2)+e*Math.ceil(l/2))][i+o[+e]*l%2]||r+o[t%2]*(!e*Math.floor(l/2)+e*Math.ceil(l/2))>this.QRframe.length-9&&i+o[+e]*l%2<8||r+o[t%2]*(!e*Math.floor(l/2)+e*Math.ceil(l/2))<8&&i+o[+e]*l%2>this.QRframe.length-9||r+o[t%2]*(!e*Math.floor(l/2)+e*Math.ceil(l/2))<8&&i+o[+e]*l%2<8?f++:(this.QRframe[r+o[t%2]*(!e*Math.floor(l/2)+e*Math.ceil(l/2))][i+o[+e]*l%2]=+parseInt(s[a]),a++),l++;r+=o[t%2]*Math.floor(l/2),i+=o[+e]*l%2,e=(i>6)*(i%2!==0)+!(i>6)*(i%2==0)}},this.getTable=function(){var e=4*(this.version-1)+21,t=document.createElement("div");t.style.backgroundColor=this.colors[0];var r=Math.floor(this.width/(e+8));t.style.padding=4*Math.ceil(this.width/(e+8))+"px",t.style.width=this.width+"px",t.style.height=this.width+"px",t.style.boxSizing="border-box";var i=document.createElement("table");i.style.borderCollapse="collapse";var h=document.createElement("tbody");for(o=0;o<this.QRframe.length;o++){for(var n=document.createElement("tr"),s=0;s<this.QRframe.length;s++){var a=document.createElement("td");a.style.width=r+"px",a.style.height=r+"px",a.style.padding="0",a.style.border="none",a.style.backgroundColor=this.colors[this.QRframe[o][s]],n.appendChild(a)}h.appendChild(n)}return i.appendChild(h),t.appendChild(i),t},this.getCanvas=function(){var e=4*(this.version-1)+21,t=Math.floor(this.width/(e+8)),r=document.createElement("canvas");if(!r.getContext)return!1;var i=r.getContext("2d");for(i.lineWidth=1,i.width=t*e,i.height=t*e,i.canvas.width=this.width,i.canvas.height=this.width,i.fillStyle=this.colors[0],i.fillRect(0,0,this.width,this.width),o=0;o<this.QRframe.length;o++)for(var h=0;h<this.QRframe.length;h++)this.QRframe[o][h]&&(i.fillStyle=this.colors[this.QRframe[o][h]],i.fillRect(t*(h+4),t*(o+4),t,t));return r},this.getImage=function(){var e=this.getCanvas();if(e){var t=this.imageTypes[this.format];if(!t)throw new Error(format+" is not a valid image type ");var r=new Image;return r.src=e.toDataURL(t),r}};var m=function(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0},c=function(e,t){if(0>=t)throw new Error("N must be positive!");if(t<String(e).length)throw new Error("str length must be inferior to N!");if(t>=String(e).length){for(var r=e;r.length<t;)r="0"+r;return r}},d=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9"],r=0;r<e.length;r++)if(t.indexOf(e[r])<0)return!1;return!0},v=function(e){e=e.toUpperCase();for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"],r=0;r<e.length;r++)if(t.indexOf(e[r])<0)return!1;return!0};this.generateQR(this.str)}var modeCode={Numeric:1,Alpha:2,Byte:4,ECI:7,Kanji:8,FNC1:5,FNC2:10},errorCorrectLevel={L:0,M:1,Q:2,H:3};